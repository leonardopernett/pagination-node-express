<%- include('layout/header')  -%>
    
<div class="container">
    <div class="row">
        <div class="col-md-4">
            <a href="/add-product" class="btn btn-primary">Create a new product</a>
        </div>
    </div>
</div>

    <div class="container mt-5">
        <div class="row">
            <% products.forEach(product => { %>
                <div class="col-md-4">
                    <div class="card">
                        <img src="<%= product.cover%>" alt="" class="img-fluid">
                        <div class="card-body text-center">
                            <h3><%= product.category  %></h3>
                            <p><%= product.name  %></p>
                            <p><%= product.price  %></p>
                        </div>
                    </div>
                </div> 
                <br><br>
           <% }); %>
        </div>
    </div>
  <br><br><br>
    <div class="container">
      <div class="row">
          <div class="col-md-8 mx-auto">
            <% if(pages) {  %>
                <nav>
                   <ul class="pagination mx-auto">
                       <!-- first page -->
                       <% if (current == 1) { %>
                           <li class="page-item disabled">
                               <a href="#"  class="page-link">First Page </a>
                           </li>
                       <% }else {  %>
                            <li class="page-item ">
                                <a href="/products/1"  class="page-link">First Page </a>
                            </li>
                       <% } %>
    
                          <!-- ITEMS  -->
                            <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
                            <% if(i !== 1) { %>
                                <li class="page-item disabled">
                                <a class="page-link" href="#">...</a>
                                </li>
                            <% } %>
                            <% for(; i <= (Number(current) + 4) && i <= pages; i++) { %>
                                <% if(i == current) { %>
                                <li class="page-item active">
                                    <a class="page-link" href="<%= i %>">
                                    <%= i %>
                                    </a>
                                </li>
                                <% } else { %>
                                <li class="page-item">
                                    <a class="page-link" href="/products/<%= i %>">
                                    <%= i %>
                                    </a>
                                </li>
                                <% } %>
                                <% if (i == Number(current) + 4 && i < pages) { %>
                                <li class="page-item disabled">
                                    <a class="page-link" href="#">...</a>
                                </li>
                                <% } %>
                            <% } %>

                     
    
                       <!-- last page -->
                       <% if (current == pages) { %>
                        <li class="page-item disabled">
                            <a href="#"  class="page-link">Last Page </a>
                        </li>
                     <% }else {  %>
                         <li class="page-item ">
                             <a href="/products/<%=pages%>"  class="page-link">Last Page </a>
                         </li>
                    <% } %>
                   </ul>
                </nav>
             <% } %>
          </div>
      </div>
    </div>

<%- include('layout/footer')  -%>
